<div class="jumbotron p-3 jumbotron-fluid bg-light">
  <h1 class="display-5"><%= @schedule.title %></h1>
  <p class="lead">
    <span class="badge badge-dark">
    <%= render 'icons/calendar' %>
    <%= @schedule.start_week %> â€” <%= @schedule.end_week %>
    </span>
  </p>
  <hr class="my-4">

    <%= link_to t('schedules.show.link.occupations.new'), new_schedule_occupation_path(@schedule), type: "button", class: "btn btn-outline-success" %>
    <%= link_to schedule_occupations_path(@schedule), type: "button", class: "btn btn-outline-secondary" do %>
     <%= t('schedules.show.link.occupations.manage') %>
     <span class="badge badge-light border">
     <%= @schedule.occupations.count %>
     </span>
    <% end %>

  <hr class="my-4">

  <div class="list-group">
    <% @schedule.occupations_this_week.each do |occupation| %>
        
      <% if @week.nil? || @week != occupation.week %>
      
        <div class="list-group-item text-light pb-0 pl-0 border-0 bg-light">
          <div class="d-flex w-100 justify-content-between">
            <h6 class='rounded p-1 mb-0' style='background: <%= occupation.color %>'>
              <small><strong><%= occupation.start_week %></strong> |
              <%= occupation.current_week_day.to_s(:date) %>
            </small></h6>
          </div>
        </div>

        <% @week = occupation.week  %>
      <% end %>

      <div class="list-group-item rounded border bg-light">
        <div class="d-flex w-100 justify-content-between">
          <h6 class="mb-1"><strong><%= occupation.title %></strong></h6>
          <span>

            <% if occupation.kind.present? %>
            <span class="badge btn btn-outline-secondary">
              <%= render 'icons/list_ul' %> <%= occupation.kind.downcase %>
            </span>
            <% end %>

            <% if occupation.place.present? %>
            <span class="badge btn btn-outline-secondary">
              <%= render 'icons/geo_alt' %> <%= occupation.place.downcase %>
            </span>
            <% end %>
          </span>
        </div>
        <span>
          <span class="badge btn btn-outline-secondary">
            <%= render 'icons/stopwatch' %>
            <time><%= occupation.start_time.to_s(:time) %></time> -
            <time><%= occupation.end_time.to_s(:time) %></time>
          </span>
        </span>
      </div>

    <% end %>
  </div>
</div>
